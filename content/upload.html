<!--[*]
[tt=window]_sys[/tt]
[script]upload.php[/script]
[bkvar=ok]
	window.opener.Brick.mod.forum.MessageEditorPanel.active.filesWidget.setFileByFID('{v#fhash}', '{v#fname}');
	self.close();
[/bkvar]

[bkvar=error]
	var el = document.getElementById('errorpanel');
	if (el){ el.style.display = ''; }
	var elErr = document.getElementById('et-{v#errnum}');
	if (elErr){ elErr.style.display = ''; }
[/bkvar]

[bkvar=command][/bkvar]
[*]-->

<style type="text/css">
	.mod-forum h2 {
		font-size: 1.2em;
	}
	.mod-forum  .errorpanel {
		color: red;
	}
</style>

<div class="mod-forum">
	<h2>Загрузка файла</h2>
	<form enctype="multipart/form-data" action="/forum/upload/go/" method="POST" onsubmit="return beginUpload();">
		
		<p>Выберите файл на своем компьютере</p>
		<div id="btnsUpload">
			<input type="file" name="file" class="image" size="40" />
			<input type="submit" value="Загрузить" />
		</div>
		<p id="loading" style="display: none">
			<img src="/images/loading.gif" />&nbsp;Идет загрузка файла, пожалуйста, подождите...
		</p>
		<p class="errorpanel" id="errorpanel" style="display: none" >
			Ну удалось загрузить изображение <b>{v#fname}</b>: 
			<span id="et-1" style="display: none;">Неизвестный тип файла</span>
			<span id="et-2" style="display: none;">Размер файла превышает допустимый</span>
			<span id="et-3" style="display: none;">Ошибка сервера</span>
			<span id="et-4" style="display: none;">Размер изображения превышает допустимый</span>
			<span id="et-5" style="display: none;">Недостаточно свободного места в вашем профиле</span>
			<span id="et-6" style="display: none;">Нет прав на загрузку файла</span>
			<span id="et-7" style="display: none;">Файл с таким именем уже загружен</span>
			<span id="et-8" style="display: none;">Необходимо выбрать файл для загрузки</span>
			<span id="et-9" style="display: none;">Некорректное изображение</span>
			<span id="et-10" style="display: none;">Некорректное изображение</span>
		</p>
	</form>
</div>
<script type="text/javascript">
	[bkvar]command[/bkvar]

	var beginUpload = function(){
		document.getElementById('btnsUpload').style.display = 'none';
		document.getElementById('loading').style.display = '';
		return true;
	};
</script>